/* --- CSS-переменные для тем --- */
:root {
  --bg-main: #343541;
  --bg-secondary: #444654;
  --bg-sidebar: #202123;
  --border-color: rgba(255, 255, 255, 0.2);
  --text-primary: #ffffff;
  --text-secondary: #d1d5db;
  --accent-color: #10a37f;
  --edit-banner-bg: #565869;
}

body.light {
    --bg-main: #ffffff;
    --bg-secondary: #f7f7f8;
    --bg-sidebar: #f0f2f5;
    --border-color: #d1d5db;
    --text-primary: #111827;
    --text-secondary: #6b7280;
    --accent-color: #0c8a6c;
    --edit-banner-bg: #e5e7eb;
}

/* --- Общие стили --- */
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  background-color: var(--bg-main);
  color: var(--text-primary);
  margin: 0;
  height: 100vh;
  overflow: hidden;
  transition: background-color 0.3s, color 0.3s;
}

.app-container {
  display: flex;
  height: 100vh;
}

/* --- Сайдбар --- */
.sidebar {
  width: 260px;
  background-color: var(--bg-sidebar);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  transition: width 0.3s ease, padding 0.3s ease, border 0.3s ease, background-color 0.3s;
  padding: 8px;
  box-sizing: border-box;
  border-right: 1px solid #000;
}
.app-container.sidebar-hidden .sidebar {
  width: 0;
  padding: 0;
  overflow: hidden;
  border-right: none;
}
.new-chat-button {
  margin-bottom: 8px;
  padding: 12px;
  border: 1px dashed var(--border-color);
  background-color: transparent;
  color: var(--text-primary);
  border-radius: 8px;
  font-size: 14px;
  text-align: left;
  cursor: pointer;
  transition: background-color 0.2s;
  white-space: nowrap;
}
.new-chat-button:hover { background-color: var(--bg-secondary); }

.sidebar-header {
  padding: 8px 0;
}
.search-input {
  width: 100%;
  padding: 8px 12px;
  border-radius: 6px;
  border: 1px solid var(--border-color);
  background-color: var(--bg-secondary);
  color: var(--text-primary);
  box-sizing: border-box;
  font-size: 14px;
}
.search-input:focus {
    outline: none;
    border-color: var(--accent-color);
}


.chat-list { flex-grow: 1; overflow-y: auto; }
.chat-list-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; cursor: pointer; border-radius: 8px; white-space: nowrap; overflow: hidden; }
.chat-list-item-title { flex-grow: 1; overflow: hidden; text-overflow: ellipsis; }
.chat-list-item:hover { background-color: var(--bg-secondary); }
.chat-list-item.active { background-color: var(--accent-color); color: white; }
.sidebar-footer { border-top: 1px solid var(--border-color); padding-top: 8px; margin-top: 8px; }
.control-button { background: none; border: none; font-size: 14px; cursor: pointer; color: var(--text-secondary); padding: 10px; display: flex; align-items: center; gap: 8px; width: 100%; border-radius: 8px; white-space: nowrap; }
.control-button:hover { background-color: var(--bg-secondary); }

.delete-chat-button { background: none; border: none; color: var(--text-secondary); font-size: 16px; cursor: pointer; padding: 5px; border-radius: 5px; visibility: hidden; opacity: 0; transition: opacity 0.2s, visibility 0.2s; }
.chat-list-item:hover .delete-chat-button { visibility: visible; opacity: 1; }
.delete-chat-button:hover { background-color: rgba(255, 255, 255, 0.1); color: #ff4d4d; }

/* --- Основная область чата --- */
.chat-area {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  height: 100vh;
  position: absolute;
  right: 0;
  width: calc(100% - 260px);
}
.chat-content-wrapper {
  flex-grow: 1;
  width: 100%;
  max-width: 820px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.message-list { flex-grow: 1; overflow-y: auto; padding: 24px 0; }

.empty-chat-container { flex-grow: 1; display: flex; align-items: center; justify-content: center; text-align: center; }
.empty-chat-logo { font-size: 48px; background-color: var(--accent-color); width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px auto; }
.empty-chat-content h1 { font-weight: 500; color: var(--text-primary); }

.message-wrapper { padding: 24px 0; width: 100%; transition: background-color 0.3s; }
.model-wrapper { background-color: var(--bg-secondary); }
.message { display: flex; gap: 20px; max-width: 100%; padding: 0 20px; box-sizing: border-box; position: relative; }
.message-icon { font-size: 24px; width: 30px; text-align: center; flex-shrink: 0; padding-top: 2px; }
.message-content { line-height: 1.75; width: 100%; padding-top: 5px; word-wrap: break-word; }
.message-content p, .message-content ul, .message-content ol { margin: 1em 0; }
.message-content pre { background-color: #000; color: #f8f8f2; padding: 15px; border-radius: 8px; overflow-x: auto; border: 1px solid var(--border-color); position: relative; }
.message-image { max-width: 300px; border-radius: 8px; margin-top: 10px; }
.copy-button { position: absolute; top: 8px; right: 8px; background-color: #444; color: white; border: 1px solid var(--border-color); border-radius: 6px; padding: 4px 8px; cursor: pointer; opacity: 0; transition: opacity 0.2s; }
pre:hover .copy-button { opacity: 1; }
.edit-button { background: none; border: none; color: var(--text-secondary); font-size: 16px; cursor: pointer; padding: 5px; border-radius: 5px; position: absolute; top: 10px; right: -10px; opacity: 0; transition: opacity 0.2s; }
.message:hover .edit-button { opacity: 1; }
.edit-button:hover { background-color: rgba(255, 255, 255, 0.1); }

/* --- Форма ввода --- */
.message-form-container { padding: 24px 20px; box-sizing: border-box; flex-shrink: 0; width: 100%; max-width: 820px; margin: 0 auto; }
.message-form-wrapper { position: relative; }
.edit-mode-banner { display: flex; justify-content: space-between; align-items: center; background-color: var(--edit-banner-bg); padding: 8px 12px; border-radius: 8px; margin-bottom: 10px; font-size: 14px; }
.edit-mode-banner button { background: none; border: 1px solid var(--text-secondary); color: var(--text-secondary); border-radius: 6px; cursor: pointer; }
.image-preview { margin-bottom: 10px; position: relative; display: inline-block; }
.image-preview img { max-height: 80px; border-radius: 8px; border: 1px solid var(--border-color); }
.remove-image-button { position: absolute; top: -10px; right: -10px; background-color: #3a3b3c; color: white; border: 1px solid #18191a; border-radius: 50%; width: 24px; height: 24px; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
.message-form { display: flex; align-items: flex-end; background-color: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 12px; padding: 10px; }
.message-form textarea { flex-grow: 1; background: transparent; border: none; outline: none; color: var(--text-primary); font-size: 16px; resize: none; max-height: 200px; line-height: 1.5; padding: 8px; }
.attachment-button, .send-button, .voice-button { background: none; border: none; font-size: 20px; color: var(--text-secondary); cursor: pointer; padding: 8px; border-radius: 8px; transition: background-color 0.2s; flex-shrink: 0; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; }
.send-button { background-color: var(--accent-color); color: white; }
.attachment-button:hover, .send-button:hover:not(:disabled), .voice-button:hover { background-color: rgba(255, 255, 255, 0.1); }
.send-button:disabled { background-color: #555; cursor: not-allowed; }
.loading-spinner { width: 16px; height: 16px; border: 2px solid rgba(255, 255, 255, 0.3); border-top-color: #fff; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto; }
.voice-button.listening { color: #ff4d4d; animation: pulse 1.5s infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }


/* --- Стили для предпросмотра изображения --- */
.image-preview {
  margin-bottom: 10px;
  position: relative;
  display: inline-block;
}
.image-preview img {
  max-height: 80px;
  border-radius: 8px;
  border: 1px solid var(--border-color);
}
.remove-image-button {
  position: absolute;
  top: -10px;
  right: -10px;
  background-color: #3a3b3c;
  color: white;
  border: 1px solid #18191a;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* --- Стили для изображения в сообщении --- */
.message-image {
  max-width: 300px;
  border-radius: 8px;
  margin-top: 10px;
}

/* --- Стили для кнопки "скрепки" --- */
.attachment-button {
  padding: 8px !important;
  font-size: 20px !important;
  width: 40px !important;
  height: 40px !important;
} 